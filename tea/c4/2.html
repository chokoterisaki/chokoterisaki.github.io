<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>C4-2</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link href="../player.css" rel="stylesheet" />
    <style>
      @font-face {
        font-family: "higu"; /*a name to be used later*/
        src: url("assets/std.otf"); /*URL to font*/
      }
      .lol {
        font-family: higu;
      }
    </style>
    <style>
      .book-page {
        max-width: 600px; /* Ancho m√°ximo de la "p√°gina" */
        margin: 0 auto; /* Centrar el contenedor */
        padding: 10px;
        text-align: justify; /* Justifica el texto */
        border-radius: 5px; /* Bordes redondeados */
      }
    </style>
  </head>
  <body class="bg-black">
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <main class="text-center top-50">
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "Entonces que as√≠ sea."
      </p>
      <hr class="text-white" />
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "Perm√≠teme darte una ayudita."
      </p>
      <img class="position-relative" width="1024" src="../assets/1.jpg" />
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "Recordemos. Edd, Mati, Mariso, una persona de la isla y t√∫ entraron por
        la puerta al sur del diagrama."
      </p>
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "Justo en frente, se encontraba la ventana de la cual cuelga el cuerpo.
        M√°s espec√≠ficamente, el alambre sostiene el cuerpo a la ventana ya que
        este fue atado a una punta del tejado a trav√©s de la ventana."
      </p>
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "Adicionalmente, la investigaci√≥n muestra que al lado del cuerpo hab√≠an
        objetos como una silla y una bombilla, indicados por la estrella. No se
        sabe su relaci√≥n con el asesinato."
      </p>
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "Lo que yo puedo decir, es que como te dije, me proclamo responsable de
        este caso."
      </p>
      <footer class="text-center position-relative">
        <div id="SP-tv" class="StarrPlayer">
          <div
            class="SP-track-info"
            style="background-image: url(../mp3/hoshizora.jpg)"
          >
            <div class="SP-track">
              <span class="SP-track-name text-white">???</span>
            </div>
            <div class="SP-artist text-white">
              Original:<span class="SP-artist-name">???</span>
            </div>
            <div class="SP-duration text-white">
              <span class="SP-duration-current"> 0:00 </span>
              <span class="SP-duration-total"> X:XX </span>
            </div>
            <div class="SP-progress-bar">
              <div class="SP-progress-bar-fill">
                <div class="SP-progress-bar-knob"></div>
              </div>
            </div>
          </div>
          <div class="SP-button-row">
            <div class="SP-prev SP-button">&lt;&lt;</div>
            <div class="SP-play SP-button">Play</div>
            <div class="SP-pause SP-button">Pause</div>
            <div class="SP-stop SP-button">Stop</div>
            <div class="SP-next SP-button">&gt;&gt;</div>
          </div>
        </div>
        <script>
          // This component is where the magic happens!
          // You shouldn't need to modify this unless you are adding new features! >üê¢
          class MusicPlayer {
            constructor(element, song_data) {
              this.parent_element = element;
              this.audio = null;
              this.current_track_index = -1;
              this.track_element =
                this.parent_element.querySelector(".SP-track-name");
              this.track_scrolling_left = true;
              this.artist_element =
                this.parent_element.querySelector(".SP-artist-name");
              this.artist_scrolling_left = true;
              this.song_data = song_data;
              this.isDragging = false;
              this.start();
            }

            start = () => {
              this.initializeButtons();
              this.initializeStatefulRenderingInterval();
              this.initializeProgressBar();
            };

            initializeStatefulRenderingInterval = () => {
              setInterval(() => {
                this.scrollTrackText();
                this.scrollArtistText();
                this.updateProgressBar(
                  this.getSongProgressPercent(this.audio) * 100
                );
                this.updateProgressText(this.audio);
                this.updateDurationText(this.audio);
                this.renderPauseOrPlayButton();
              }, 50);
            };

            initializeButtons = () => {
              let buttons = this.parent_element.querySelectorAll(".SP-button");
              buttons.forEach((button) => {
                button.addEventListener("click", (event) => {
                  switch (true) {
                    case event.target.classList.contains("SP-play"):
                      this.play_song();
                      break;
                    case event.target.classList.contains("SP-pause"):
                      this.pause_song();
                      break;
                    case event.target.classList.contains("SP-next"):
                      this.next_song();
                      break;
                    case event.target.classList.contains("SP-prev"):
                      this.prev_song();
                      break;
                    case event.target.classList.contains("SP-stop"):
                      this.stop_song();
                      break;
                    default:
                      break;
                  }
                });
              });
            };

            initializeProgressBar = () => {
              let progressKnob = this.parent_element.querySelector(
                ".SP-progress-bar-knob"
              );
              let progressBar =
                this.parent_element.querySelector(".SP-progress-bar");
              progressKnob.addEventListener("pointerdown", (event) => {
                this.isDragging = true;
                event.preventDefault();
              });

              this.parent_element.addEventListener("pointermove", (event) => {
                if (!this.isDragging || !this.audio) return;
                const boundingRect = progressBar.getBoundingClientRect();
                let percent =
                  (event.clientX - boundingRect.left) / boundingRect.width;
                percent = Math.max(0, Math.min(1, percent));
                this.audio.currentTime = this.audio.duration * percent;
                this.updateProgressBar(percent * 100);
              });
              document.addEventListener("pointerup", () => {
                this.isDragging = false;
              });

              progressBar.addEventListener("click", (event) => {
                if (this.audio == null || this.isDragging) return; // Skip if dragging or audio is not initialized
                const bounding = progressBar.getBoundingClientRect();
                const percent =
                  (event.clientX - bounding.left) / bounding.width;
                this.audio.currentTime = this.audio.duration * percent;
                this.updateProgressBar(percent * 100);
              });
            };

            play_song = (track_number) => {
              // If the audio is paused and the track number is the same as the current track, just resume playing
              if (
                this.audio &&
                this.audio.paused &&
                (track_number === this.current_track_index ||
                  track_number == null)
              ) {
                this.audio.play();
                return;
                // If the audio is playing, but the play button is pressed, pause the audio
              } else if (this.audio && track_number == null) {
                this.audio.pause();
                return;
              }
              // Loop the song list if the track number is out of bounds
              if (!track_number && this.current_track_index === -1) {
                track_number = 0;
              } else if (track_number >= this.song_data.length) {
                track_number = 0;
              } else if (track_number < 0) {
                track_number = this.song_data.length - 1;
              }

              // Stop the current song if it is playing
              if (this.audio && !this.audio.paused) {
                this.stop_song();
              }

              // Play the song
              let song_url = this.song_data[track_number].url;
              this.parent_element.querySelector(".SP-track-name").innerHTML =
                this.song_data[track_number].name;
              this.parent_element.querySelector(".SP-artist-name").innerHTML =
                this.song_data[track_number].artist;
              this.audio = new Audio(song_url);
              this.audio.addEventListener("ended", () => {
                this.audio.currentTime = 0;
                this.next_song();
              });
              this.audio.play();
              this.current_track_index = track_number;
            };

            pause_song = () => {
              this.audio.pause();
            };

            next_song = () => {
              let next_track_number = this.current_track_index + 1;
              if (next_track_number >= this.song_data.length) {
                next_track_number = 0;
              }
              this.audio.pause();
            };

            prev_song = () => {
              let prev_track_number = this.current_track_index - 1;
              if (prev_track_number < 0) {
                prev_track_number = this.song_data.length - 1;
              }

              this.play_song(prev_track_number);
            };

            stop_song = () => {
              this.audio.pause();
              this.audio = null;
              this.current_track_index = -1;
            };

            getSongProgressString = (audio_object) => {
              if (!audio_object) {
                return "0:00";
              }
              const current_time = audio_object.currentTime || 0;
              return `${Math.floor(current_time / 60)}:${Math.floor(
                current_time % 60
              )
                .toString()
                .padStart(2, "0")}`;
            };

            getSongDurationString = (audio_object) => {
              if (!audio_object) {
                return "0:00";
              }
              const duration = audio_object.duration || 0;
              return `${Math.floor(duration / 60)}:${Math.floor(duration % 60)
                .toString()
                .padStart(2, "0")}`;
            };

            updateDurationText = (audio_object) => {
              let progressText =
                this.parent_element.querySelector(".SP-duration-total");
              progressText.innerHTML = this.getSongDurationString(audio_object);
            };

            updateProgressText = (audio_object) => {
              let progressText = this.parent_element.querySelector(
                ".SP-duration-current"
              );
              progressText.innerHTML = this.getSongProgressString(audio_object);
            };

            getSongProgressPercent = (audio_object) => {
              if (audio_object == null) return 0;
              const currentTime = audio_object.currentTime;
              const duration = audio_object.duration;
              return currentTime / duration;
            };

            updateProgressBar = (progressFloat) => {
              let progressTruncated = progressFloat.toFixed(2);
              let progressBar = this.parent_element.querySelector(
                ".SP-progress-bar-fill"
              );
              progressBar.style.width = progressTruncated + "%";
            };

            // This function scrolls the track text in the player when it is too long to fit in the container
            scrollTrackText = () => {
              if (
                this.track_element.scrollWidth >
                  this.track_element.clientWidth +
                    this.track_element.scrollLeft &&
                this.track_scrolling_left
              ) {
                this.track_element.scrollBy(1, 0);
              } else {
                this.track_scrolling_left = false;
              }
              if (!this.track_scrolling_left) {
                this.track_element.scrollBy(-0.5, 0);
                if (this.track_element.scrollLeft === 0) {
                  this.track_scrolling_left = true;
                }
              }
            };

            // This function scrolls the artist text in the player when it is too long to fit in the container
            scrollArtistText = () => {
              if (
                this.artist_element.scrollWidth >
                  this.artist_element.clientWidth +
                    this.artist_element.scrollLeft &&
                this.artist_scrolling_left
              ) {
                this.artist_element.scrollBy(1, 0);
              } else {
                this.artist_scrolling_left = false;
              }
              if (!this.artist_scrolling_left) {
                this.artist_element.scrollBy(-0.5, 0);
                if (this.artist_element.scrollLeft === 0) {
                  this.artist_scrolling_left = true;
                }
              }
            };

            // This hides the play button when the audio is playing and hides the pause button when the audio is paused
            renderPauseOrPlayButton = () => {
              let play_button = this.parent_element.querySelector(".SP-play");
              let pause_button = this.parent_element.querySelector(".SP-pause");
              if (this.audio && !this.audio.paused) {
                play_button.style.display = "none";
                pause_button.style.display = "block";
              } else {
                play_button.style.display = "block";
                pause_button.style.display = "none";
              }
            };
          }
          // Song files hosted on github >üê¢
          let song_data_absolute = [
            {
              name: "logic chess",
              artist: "dead angle",
              url: "../mp3/angle.mp3",
            },
          ];
          // Song files hosted on nekoweb >üê¢
          let song_data_relative = [
            {
              name: "logic chess",
              artist: "dead angle",
              url: "../mp3/angle.mp3",
            },
          ];

          // Automatically initialize all song players on the page with the same data >üê¢
          // let song_player_elements = document.querySelectorAll(".StarrPlayer");
          // let audio_players = [];

          // song_player_elements.forEach((element) => {
          //     let audio_player = new MusicPlayer(element, song_data_relative);
          //     audio_players.push(audio_player);
          // });

          // Load the song players manually >üê¢
          let song_player_basic = document.querySelector(".StarrPlayer");
          let basic_player = new MusicPlayer(
            song_player_basic,
            song_data_relative
          );

          // This one loads from github via an absolute path >üê¢
          let song_player_stone = document.querySelector(
            "#SP-stone.StarrPlayer"
          );
          let stone_player = new MusicPlayer(
            song_player_stone,
            song_data_absolute
          );

          // This one loads from nekoweb via a relative path >üê¢
          let song_player_tv = document.querySelector("#SP-tv.StarrPlayer");
          let tv_player = new MusicPlayer(song_player_tv, song_data_relative);
        </script>
      </footer>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "A ver... seg√∫n Edd y Mati, Leros entr√≥ al ba√±o y se qued√≥ encerrado.
        Mientras estaba ahi, se supone que Fox de alguna forma lo atrajo a la
        ventana y alli mismo, con el hilo lo asfixi√≥."
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Hay que tener en cuenta el hecho de que Fox tenga poderes m√°gicos, pues
        eso hace que su testimonio pueda ser posible pero a la vez no es fiable
        porque aprovechandose de ellos, podr√≠a haberlo hecho de cualquier otra
        manera que quisiera."
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "De todas maneras, lo de que habian objetos en la escena del crimen
        llama la atenci√≥n. Una bombilla y una silla, justo en un lugar donde la
        luz del techo no funciona."
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Quiz√°s Leros no fue atra√≠do directamente sino que... ¬øquer√≠a usar esos
        objetos para arreglar la luz, y en ese instante pas√≥ por la ventana,
        donde era vulnerable?"
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Todo esto es suponiendo que el culpable haya estado afuera, esperando
        en la ventana. El problema es que la ventana es estrecha y seria dificil
        meter tus manos desde ahi."
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Eso... dificulta que se trate de un hecho realista."
      </p>
      <p class="text-white book-page" style="font-family: 'monospace;'">
        Justo cuando pens√© que me encontraba en un camino sin salida, record√©
        las palabras de Nia tras ejercer como fiscal en uno de los juicios,
        actividad t√≠pica de LSDC.
      </p>
      <p
        class="book-page"
        style="
          font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial,
            sans-serif;
          color: brown;
        "
      >
        <i>Esto s√≠ que fue un turnabout</i>
      </p>
      <p class="text-white book-page" style="font-family: 'monospace;'">
        Turnabout. Que palabra rara. A veces es traducida como 'caso', pero con
        Aze siempre cre√≠mos que una traducci√≥n m√°s literal era... como...
        ¬ø'vuelta 360¬∞'?
      </p>
      <p class="text-white book-page" style="font-family: 'monospace;'">
        ¬°EH! Eso es, solo tengo que darle la vuelta al tablero, y...
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "¬øC√≥mo lo habria hecho el culpable si estaba afuera?"
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Meter las manos lo suficiente como para maniobrar el hilo ser√≠a un poco
        imposible, como ya conclu√≠, pero lo que s√≠ puede ocurrir es que el hilo
        ya est√© atravesando la ventana, aunque en ese caso ser√≠a un poco
        in√∫til."
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Excepto que estuviera siendo tensionado"
      </p>
      <img class="position-relative" width="512" src="../assets/1b.png" />
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Entonces, quiz√°s no de la manera ilustrada, pero mas o menos coloc√°ndo
        el largo del hilo por entre la zona vulnerable y sostenido por alguien
        desde la ventana..."
      </p>
      <img class="position-relative" width="512" src="../assets/1c.jpg" />
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Al soltarse los puntos desde donde el hilo se estaba sosteniendo del
        lado de adentro, r√°pidamente se llevar√≠an a cualquier cosa en su radio
        hasta la ventana donde estar√≠a el culpable, quien necesitaria aplicar
        fuerza para tirar de la cuerda, asfixiarlo y que todo esto funcione."
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Esa es una manera en la que un humano podr√≠a hacerlo."
      </p>
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "¬°Muy bien! Ah, pero, ¬øpor qu√© estar√≠a cerrada con llave la puerta?"
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "Ah... cierto. No creo que Leros se haya encerrado a si mismo ni que el
        culpable lo haya hecho, ya que ni siquiera ten√≠a la llave. La ten√≠a..."
      </p>
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "La dependienta. Oh, pero si fueramos a inculparla, eso tambi√©n ser√≠a
        raro de encajar. Despues de todo, siempre estuvo dentro del local donde
        estaban Edd y Mati, y el ba√±o no tiene otras entradas aparte de la
        ventana, ¬øverdad?"
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "..."
      </p>
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "Eso solo nos deja una respuesta: fue obra de magia."
      </p>
      <p
        class="text-success book-page"
        style="
          font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande',
            'Lucida Sans', Arial, sans-serif;
        "
      >
        "E-espera..."
      </p>
      <p
        class="book-page"
        style="
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          color: rebeccapurple;
        "
      >
        "No te preocupes, has estado tan cerca que te dar√© otra oportunidad.
        Pero t√∫ decides si gastarla en seguir este caso desde donde lo dejaste o
        ir directo al siguiente."
      </p>
      <p class="text-white book-page" style="font-family: 'monospace;'">
        No me pod√≠a arriesgar, asi que por ahora, mejor probar√≠a con otro caso.
      </p>
      
    </main>
    <div class="text-center">
      <button
        class="btn btn-light mb-5"
        onclick="window.location.href='1.html'"
      >
        volver
      </button>
      <button
        class="btn btn-danger mb-5"
        onclick="window.location.href='3.html'"
      >
        literalmente siguiente
      </button>
    </div>
  </body>
</html>
